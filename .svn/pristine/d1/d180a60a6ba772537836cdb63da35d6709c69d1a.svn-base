/*!
 * Freemail Navigator
 * (c) 2009-2010 1&1 Internet AG
 * Profile: gmx
 * Version: 3.6.2
 * Built: 2011-10-20 10:50
 */
var com=com||{};com.unitedinternet=com.unitedinternet||{};com.unitedinternet.portal=com.unitedinternet.portal||{};com.unitedinternet.portal.navigator=com.unitedinternet.portal.navigator||{};(function(a){a.config=a.config||{logging:{level:"warn"},routing:{loadTemplateURL:"https://navigator.gmx.net/load/applications/gmx",saveSortationURL:"//service.gmx.net/de/cgi/g.fcgi/application/navigator/apps/sortorder",sessionParameter:"sid",sortParameter:"sortorder"},statistics:{analytics:{baseURL:"//wa.ui-portal.de/",portalName:"gmx",cookieDomain:".gmx.net",cookieTime:"63072000000",sampleType:"pi"},clickout:{baseURL:"//pixelbox.uimserv.net/cgi-bin/extern/",sectionName:"interhome2",positionName:"navigator2"}},bubble:{fadeTime:420},communication:{destinationMap:{networks:"loginzentrale",shops:"loginzentrale",other:"loginzentrale",comlib:"messenger"},broadcastList:"comlib messenger".split(" ")},applications:{loginList:"facebook fpwebbrief limango".split(" "),loginMap:{hybridmail:"fpwebbrief"},appList:"mail cockpit riamail smartdrive fotomanager messenger addressbook rssreader bookmarks notes ebay mafo demail brandstogo officewrite officecalc officeshow ereader calendar loginzentrale welt bild umsapp".split(" "),appMap:{tutorial:"help"}},security:{cookieDomain:".gmx.net"},version:"3.6.2",profile:"gmx"};
}(com.unitedinternet.portal.navigator));(function(e,c,a,h){a.Log=a.Log||{};var d={debug:1,info:2,warn:3,error:4},b;function g(m,k){try{if(c.console&&m>=(d[a.config.logging.level]||0)){var j,i=[k,"log"];for(j in i){if(console.hasOwnProperty(i[j])){return console[i[j]];}else{if(console[i[j]]){return function(){console[i[j]].apply(console,arguments);};}}}}}catch(l){}return function(){};}for(b in d){if(d.hasOwnProperty(b)){a.Log[b]=g(d[b],b);}}a.Class=a.Class||{create:function(j){if(!j){throw new Error("Invalid argument in create()");
}function i(){if(this.initialize){this.initialize.apply(this);}}i.prototype=j;return new i();},declare:function(k,i){if(!k){throw new Error("Invalid argument in define()");}function j(){if(this.initialize){this.initialize.apply(this,arguments);}}j.prototype=k;if(i){j.prototype=this.mixin(j.prototype,i);}return j;},mixin:function(k,j){if(!k||!j){throw new Error("Invalid argument in mixin()");}var i;for(i in j){if(i&&j.hasOwnProperty(i)&&!(i in k)){k[i]=j[i];}}return k;}};var f={addListener:function(j){var i=this;
if(!i._listeners){i._listeners=[];}if(j&&j.triggerHandler){if(!(j in i._listeners)){i._listeners.push(j);}}else{a.Log.debug("Invalid argument in EventListener");a.Log.debug(j);}},removeListener:function(){var i=this;delete i._listener;i._listener=null;},_triggerListener:function(m){var j=this,l=j._listeners,k,i;if(m&&l){for(k in l){if(l[k]&&l[k].triggerHandler){i=l[k].triggerHandler.apply(l[k],[m]);}}}else{a.Log.debug("Illegal argument in EventListener.addListener");}return i===h?h:!!i;}};a.EventListener=f;
e.fn.extend({readyQueue:function(i){return e(this).ready(function(){if(e.isFunction(i)){e.queue(this,"rx",function(){i.call(this);});e.dequeue(this,"rx");}});}});})(jQuery,window,com.unitedinternet.portal.navigator);(function($,window,nx,undefined){if(!this.JSON){this.JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());if(!nx.JSON&&!!this.JSON){nx.JSON=this.JSON;}})(jQuery,window,com.unitedinternet.portal.navigator);(function(h,p,y,k){var v=y.Class.declare({_handleCookie:function(){var A,z;if(document.cookie.indexOf("ns_sample")==-1){z=this._config;
A="ns_sample="+Math.floor(Math.random()*100)+"; expires="+new Date(new Date().getTime()+(+z.cookieTime)).toGMTString()+"; path=/; domain="+z.cookieDomain;document.cookie=A;}},_getName:function(){var z=this;if(z._target){return"produkte.navigator."+z._type+"."+z._name+"."+z._target+"."+z._section+".index";}return"produkte.navigator."+z._type+"."+z._name+"."+z._section+".index";},_isSample:function(){var z=this,B=/(^|;) ?ns_sample=5\d(;|$)/.test(document.cookie),A=z._config;return B&&(z._type==A.sampleType||A.sampleType=="all"||z._name==="navigator");
},toString:function(){var A=this,B=A._config,C=B.portalName,z=A._getName();if(A._isSample()){C+="-s";}else{if(A._section==="startup"){return k;}}return B.baseURL+B.portalName+"/"+C+"/s?"+z;},initialize:function(B,A,D,C){var z=this;z._type=B;z._name=A;z._section=D;z._target=C;z._config=y.config.statistics.analytics;z._handleCookie();}});y.WaPixel=v;var b=y.Class.declare({_getName:function(){var z=this;return z._config.sectionName+"/"+z._name+"/"+z._type;},_getParameter:function(){var z=this;return"&target="+escape(z._name+"/"+z._target)+"&pos="+z._config.positionName+"?r="+escape(document.referrer)+"&d="+(Math.random()*100000);
},toString:function(){var A=this,z=A._getName(),B=A._getParameter();return A._config.baseURL+"CP/001;sc%3D"+z+B;},initialize:function(B,A,C){var z=this;z._type=B;z._name=A;z._target=C;z._config=y.config.statistics.clickout;}});y.UimPixel=b;var q=y.Class.declare({_getPixelHtml:function(C,B){var z=Math.ceil(Math.random()*4),A=Math.ceil(Math.random()*4);if(!C){return'<img height="'+z+'" width="'+A+'" alt="" src="'+B+'">';}return'<img id="'+C+'" height="'+z+'" width="'+A+'" alt="" src="'+B+'">';},_insertPixel:function(z,B){var A=this;
if(z.length){z.replaceWith(B);}else{if(A._$context.length){h(B).appendTo(A._$context);}else{return false;}}return true;},insertUimPixel:function(B){var A=this,z=h("#uimpixel",A._$context),C=A._getPixelHtml("uimpixel",B);return A._insertPixel(z,C);},insertWaPixel:function(B){var A=this,z=h("#wapixel",A._$context),C=A._getPixelHtml("wapixel",B);return A._insertPixel(z,C);},initialize:function(){this._$context=h("#pixeldiv");}});var m=y.Class.declare({_insertPixel:function(B,A,C){var z=this;switch(B){case"wa":z._view.insertWaPixel(A+"&"+h.param(C));
break;case"uim":z._view.insertUimPixel(A);break;}},_writeApp:function(z,C,E){var A=this,F=A._navigator.getModel().getApplication(z),D,B;if(F&&F.statistics&&F.statistics[C]){D=F.statistics;switch(typeof D[C]){case"string":A._insertPixel("wa",D[C],E);break;case"object":for(B in D[C]){if(D[C].hasOwnProperty(B)){A._insertPixel(B,D[C][B],E);}}break;}}else{y.Log.warn("No data found "+z+"/"+C+" in StatisticsController");}},_writeStats:function(C,B,E){var z=this,A,D=z._navigator.getModel().getStatistics(C);
if(D&&D.hasOwnProperty(B)){switch(typeof D[B]){case"string":z._insertPixel("wa",D[B],E);break;case"object":for(A in D[B]){if(D[B].hasOwnProperty(A)){z._insertPixel(A,D[B][A],E);}}break;}}else{if(B!=="startup"){y.Log.warn("No data found "+C+"/"+B+" in StatisticsController");}}},writeAppPixel:function(z,B,D){if(!z||!B){y.Log.error("Invalid argument in StatisticsController");}var A=this,C=A._getPayload();if(D){A._writeApp(z,B,h.extend(C,D));}else{A._writeApp(z,B,C);}return true;},writeTrackingPixel:function(A,D,z){var F={},E,B,C;
if(z){if(/([a-zA-Z0-9]+@){2,}/.test(z)){E=z.split(".");if(E[0]){B=E[0].split("@");for(C=0;C<4;C++){if(B[C]){F["mc_q_"+C]=B[C];}else{F["mc_q_"+C]="undef";}}}if(E[1]){F.mc_z_0=E[1];}}else{F.n_campaign_id=z;}}return this.writeAppPixel(A,D,F);},writeStatsPixel:function(B,A){if(!B||!A){y.Log.error("Invalid argument in StatisticsController");}var z=this,C=z._getPayload();z._writeStats(B,A,C);return true;},_getPayload:function(){var z=this,A={ns__t:new Date().getTime()};if(typeof z._payload==="object"){return h.extend(A,z._payload);
}else{return A;}},initialize:function(z){var A=this;A._navigator=z;A._payload=y.config.statistics.analytics.payload;A._view=new q();}});y.StatisticsController=m;var l=y.Class.declare({addHighlight:function(z,A){this._$context.find("ul:first #"+A+"_"+z+" a:first").addClass("current");},removeHighlight:function(){this._$context.find("ul:first a.current").removeClass("current");},initialize:function(){var z=this;this._$context=h("#box_services").find("ul:first li").bind("click",function(B){var A=h(B.currentTarget),D=A.attr("id").split("_"),C;
if(B&&D&&D[0]&&D[1]){B.preventDefault();C=h.Event(B);C.type=D[0].toLowerCase();C.target=D[1].toLowerCase();B.stopPropagation();z._triggerListener(C);}}).end().find("a.button").hover(function(A){h(this).addClass("hover");},function(A){h(this).filter(".hover").removeClass("hover");}).end();}},y.EventListener);var c=y.Class.declare({_onServiceClicked:function(B){var z=this,A=y.config.applications.appList;if(B){if(A&&h.inArray(B,A)>-1){z._navigator.activateApp(B);z._navigator.writeAppPixel(B,"click");
}}else{y.core.error("Invalid argument "+B+" in ServicesController");}},triggerHandler:function(z){if(z&&z.type==="app"){this._onServiceClicked(z.target);}},onApplicationSwitched:function(){},initialize:function(z){var A=this;A._navigator=z;A._view=new l();A._view.addListener(A);}});y.ServicesController=c;var i=y.Class.declare({showDropdown:function(){this._$context.filter(":hidden").show();this._$portal.filter(".closed").removeClass("closed");},hideDropdown:function(){this._$context.filter(":visible").hide();
this._$portal.addClass("closed");},toggleDropdown:function(){this._$context.toggle();this._$portal.toggleClass("closed");},getUrlFromTarget:function(z){if(z){return this._$context.find("#portal_"+z).children("a:first").attr("href");}return k;},initialize:function(){var z=this;this._$portal=h("#box_portal").find(".portal:first").hover(function(A){h(this).addClass("hover");},function(A){h(this).filter(".hover").removeClass("hover");}).end().find("#portal").bind("click",function(A){if(A){var B=h.Event(A);
B.type="clickout";B.target="portal";z._triggerListener(B);A.stopPropagation();}}).end().find("#portal_popup").bind("click",function(A){if(A){A.preventDefault();}z.toggleDropdown();}).end();this._$context=h("#popup").bind("mouseleave",function(){z.hideDropdown();}).find("ul:first li").bind("click",function(B){var A=h(B.currentTarget),D=A.attr("id").split("_"),C;z.hideDropdown();if(B&&D&&D[0]&&D[1]){C=h.Event(B);if(A.children("a:frist").attr("target")==="iframe_mail"){C.type="clicktarget";}else{C.type="clickout";
}C.target=D[1];z._triggerListener(C);B.stopPropagation();}}).end();}},y.EventListener);var d=y.Class.declare({_onClicktargetClicked:function(B){var z=this,A=z._view.getUrlFromTarget(B);z._navigator.writeStatsPixel("portal_"+B,"click");z._navigator.activateApp("mail",A);},_onClickoutClicked:function(z){this._navigator.writeStatsPixel("portal_"+z,"click");},triggerHandler:function(A){var z=this;if(A){switch(A.type){case"clickout":z._onClickoutClicked(A.target);break;case"clicktarget":z._onClicktargetClicked(A.target);
break;default:y.Log.warn("Unkown event type "+A.type+" in PortalController");}}},initialize:function(z){var A=this;A._navigator=z;A._view=new i();A._view.addListener(A);}});y.PortalController=d;var f=y.Class.declare({isClosed:function(){return !!this._$context.hasClass("closed");},openSearch:function(){this._$context.removeClass("closed");},closeSearch:function(){this._$context.addClass("closed");},toggleSearch:function(){this._$context.toggleClass("closed");},getText:function(){return this._$context.find("input#searchtext").val();
},setText:function(z){if(z!==k){this._$context.find("input#searchtext").val(z);}},_onBlurToggleText:function(){var z=this._$context.find("input#searchtext").val();if(!z){this._$context.find("input#searchtext").removeClass("active");}},_onFocusToggleText:function(){this._$context.find("input#searchtext").addClass("active");},initialize:function(){var z=this;this._$context=h("#box_search").hover(function(A){h(this).addClass("hover");},function(A){h(this).filter(".hover").removeClass("hover");}).find(".search-open").bind("click",function(A){h(this).parent(".button.hover").removeClass("hover");
if(A){A.preventDefault;var B=h.Event(A);B.type="search";B.target="toggle";z._triggerListener(B);}}).end().find(".search-close:first").bind("click",function(A){if(A){A.preventDefault;var B=h.Event(A);B.type="search";B.target="toggle";z._triggerListener(B);}}).end().find(".icon-search:first").bind("click",function(A){if(A){A.preventDefault();var B=h.Event(A);B.type="search";if(z.isClosed()){B.target="open";}else{B.target="run";}z._triggerListener(B);}}).end().find("input#searchtext").bind("keypress",function(A){var C=(!!A.keyCode?A.keyCode:A.which),B;
if(A&&C===13&&!z.isClosed()){A.preventDefault();B=h.Event(A);B.type="search";B.target="run";z._triggerListener(B);}}).bind("focus",function(){z._onFocusToggleText();}).bind("blur",function(){z._onBlurToggleText();}).end();}},y.EventListener);var g=y.Class.declare({_renderSearchWidth:function(B){var A,z,C;if(B){A=this._view;z=h(document).width();C=h("#navigator #box_tools").outerWidth()+220;if(!A.isClosed()&&z&&(z-B)<C){A.closeSearch();}else{if(A.isClosed()&&z&&(z-B)>C){A.openSearch();}}}},_onToggleSearchClicked:function(){this._userAction=true;
this._view.toggleSearch();this._navigator.onNavigatorChanged();},_onOpenSearchClicked:function(){var z="search",B=this._navigator.getModel().getApplication(z),A=B?B.searchUrl:k;this._navigator.activateApp(z);if(A){this._navigator.writeStatsPixel("search","click");this._navigator.navigateApp(z,A);}},_onRunSearchClicked:function(){var z="search",C=this._navigator.getModel().getApplication(z),B=C?C.searchUrl:k,A=this._view.getText();this._navigator.activateApp(z);if(B){this._navigator.writeStatsPixel("search","click");
if(A){this._navigator.navigateApp(z,B+A);}else{this._navigator.navigateApp(z,B);}}},onNavigatorChanged:function(){if(!this._userAction){var z=this._navigator.getBounds();this._renderSearchWidth(z.leftWidth);}},triggerHandler:function(z){if(z&&z.type==="search"){switch(z.target){case"toggle":this._onToggleSearchClicked();break;case"run":this._onRunSearchClicked();break;case"open":this._onOpenSearchClicked();break;default:y.Log.warn("Unkown event target "+z.target+" in SearchController.triggerHandler");
}}},initialize:function(z){this._navigator=z;this._userAction=false;this._view=new f();this._view.addListener(this);}});y.SearchController=g;var r=y.Class.declare({_handleContext:function(){if(!this._$context||!this._$context.length){this._$context=h("#canvas");}},appendFrame:function(z,E){this._handleContext();var D,C="iframe_"+z,A={id:C,name:"navigator_"+z},B={left:"-10000px",visibility:"visible"};if(h.browser.msie){A.frameBorder="0";}else{A.frameborder=0;}if(h.browser.mozilla){A.src="javascript:''";
}else{A.src=E;}if(!this._$context.find("#"+C).length&&E){D=h("<iframe />").attr(A).css(B).appendTo(this._$context);if(!A.src||A.src=="javascript:''"){D.attr("src",E);}}else{y.Log.warn(C+" already exists or invalid url in CanvasView.appendFrame!");}},detachFrame:function(z){this._handleContext();var A="iframe_"+z;this._$context.find("#"+A).remove();},navigateFrame:function(z,C){this._handleContext();var A="iframe_"+z,B=this._$context.find("#"+A);if(B.length&&C){B.attr("src",C);}else{y.Log.warn(A+" not found or invalid url in CanvasView.navigateFrame!");
}},showFrame:function(z,C,E){var B="iframe_"+z,D=this._$context.find("#"+B),A={left:"0px",visibility:"visible"};if(E){h.extend(A,E);}if(D.length){D.css(A);if(!C){D.focus();}}else{y.Log.warn(B+" not found in CanvasView.showFrame!");}},hideFrame:function(z,D){var B="iframe_"+z,C=this._$context.find("#"+B),A={left:"-10000px",visibility:D?"hidden":"visible"};if(C.length){C.css(A);}else{y.Log.warn(B+" not found in CanvasView.hideFrame!");}},initialize:function(){this._$context=null;}},y.EventListener);
var o=y.Class.declare({_getAppByName:function(z){switch(typeof z){case"string":return this._navigator.getModel().getApplication(z);case"object":return z;default:return k;}},append:function(z,C){var A=this,B=A._getAppByName(z);if(B){A._view.appendFrame(B.id,C||B.url,B.modal);}else{y.Log.warn("Invalid argument in CanvasController");}},detach:function(z){var A=this,B=A._getAppByName(z);if(B){A._view.detachFrame(B.id);}else{y.Log.warn("Invalid argument in CanvasController");}},navigate:function(z,C){var A=this,B=A._getAppByName(z);
if(B){A._view.navigateFrame(B.id,C);}else{y.Log.warn("Invalid argument in CanvasController");}},show:function(z,B){var A=this,D=A._getAppByName(z),C=A._navigator.getModel().getCurrent();if(D){if(C&&D!=C&&!B){A._view.hideFrame(C.id,C.properties&&C.properties.commState==="ready");}A._view.showFrame(D.id,!!D.preventFocus,D.styles&&D.styles.frame,D.modal,D.autoCenter);}else{y.Log.warn("Invalid argument in CanvasController");}},hide:function(z){var A=this,B=A._getAppByName(z);if(B){A._view.hideFrame(B.id,B.properties&&B.properties.commState==="ready");
}else{y.Log.warn("Invalid argument in CanvasController");}},initialize:function(z){var A=this;A._navigator=z;A._view=new r();}});y.CanvasController=o;var w=y.Class.declare({_getWidth:function(){return parseInt(this._$context.find(".ui-pager-content:first").outerWidth(),10);},scrollReset:function(){this._$context.find("ul:first").css("left","0px");},scrollLeft:function(B){var z=this._$context.find("ul:first"),A=parseInt(z.css("left"),10);z.css("left",A+(B*this._itemWidth)+"px");},scrollRight:function(B){var z=this._$context.find("ul:first"),A=parseInt(z.css("left"),10);
z.css("left",(A-(B*this._itemWidth))+"px");},calculateCountByWidth:function(z){if(!z){return this.getVisibleCount();}var A=z+this._getWidth();return !!A?Math.floor(A/this._itemWidth):k;},getApplicationCount:function(){return this._$context.find("ul:first").children("li").length;},getVisibleCount:function(){var z=this._getWidth();return !!z?Math.floor(z/this._itemWidth):k;},activateButton:function(z){this._$context.find(".ui-pager-button.ui-pager-"+z+".ui-disabled:first").removeClass("ui-disabled");
},deactivateButton:function(z){this._$context.find(".ui-pager-button.ui-pager-"+z+":first").addClass("ui-disabled");},initialize:function(){var z=this;this._$context=h("#box_applications .ui-pager:first").find(".ui-pager-button").filter(".ui-pager-left:first").bind("click",function(A){if(A){A.preventDefault();var B=h.Event(A);B.type="button";B.target="left";z._triggerListener(B);}}).end().filter(".ui-pager-right:first").bind("click",function(A){if(A){A.preventDefault();var B=h.Event(A);B.type="button";
B.target="right";z._triggerListener(B);}}).end().end();this._itemWidth=parseInt(this._$context.find("ul:first li:first").outerWidth(),10);}},y.EventListener);var s=y.Class.declare({_scrollReset:function(){var z=this;if(z._scrollLeftCount>0){z._view.scrollReset();}z._scrollLeftCount=0;z._scrollRightCount=0;},_scrollLeft:function(A){var z=this;if(A>z._scrollLeftCount){A=z._scrollLeftCount;}z._view.scrollLeft(A);z._scrollRightCount+=A;if(z._scrollLeftCount>=A){z._scrollLeftCount-=A;}},_scrollRight:function(A){var z=this;
if(A>z._scrollRightCount){A=z._scrollRightCount;}z._view.scrollRight(A);z._scrollLeftCount+=A;if(z._scrollRightCount>=A){z._scrollRightCount-=A;}},_onLeftButtonClicked:function(){var z=this;if(!!z._scrollLeftCount){if(z._scrollLeftCount>z._visibleCount){z._scrollLeft(z._visibleCount);}else{z._scrollLeft(z._scrollLeftCount);}z._toggleButtons();}},_onRightButtonClicked:function(){var z=this;if(!!z._scrollRightCount){if(z._scrollRightCount>z._visibleCount){z._scrollRight(z._visibleCount);}else{z._scrollRight(z._scrollRightCount);
}z._toggleButtons();}},_toggleButtons:function(){var z=this;if(z._scrollLeftCount>0){z._view.activateButton("left");}else{z._view.deactivateButton("left");}if(z._scrollRightCount>0){z._view.activateButton("right");}else{z._view.deactivateButton("right");}},renderPagingWidth:function(E,F){var B=this,z,D,A=B._view,C=h(p).width();if(!B._isRunning||!A){return;}z=A.calculateCountByWidth(C-E-F-30);if(z===k){return;}else{if(z<2){z=2;}else{if(z>B._applicationCount){z=B._applicationCount;}}}if(z!=B._visibleCount&&z<=B._applicationCount){B._parent._navigator.setAmountClass("applications",z);
D=B._visibleCount-z;B._visibleCount=z;if(z==B._applicationCount){B._scrollReset();}else{if(!B._scrollRightCount&&B._scrollLeftCount&&D<0){B._view.scrollLeft(Math.abs(D));B._scrollLeftCount+=D;}else{B._scrollRightCount+=D;}}B._toggleButtons();}},triggerHandler:function(A){var z=this;if(A&&A.type==="button"){switch(A.target){case"left":z._onLeftButtonClicked();break;case"right":z._onRightButtonClicked();break;default:y.Log.warn("Unkown event target "+A.target+" in PagingController");}}},run:function(){var A=this,z;
A._view=new w();A._view.addListener(A);z=A._view;A._isRunning=true;A._applicationCount=z.getApplicationCount();A._scrollLeftCount=0;A._visibleCount=z.getVisibleCount();A._scrollRightCount=Math.abs(A._applicationCount-A._visibleCount);A._toggleButtons();},initialize:function(A){var z=this;z._parent=A;z._isRunning=false;}});var u=y.Class.declare({_appendEvents:function(){var z=this;this._$context.bind("mouseleave",function(A){if(z._isSorting){h(this).find("ul:first").trigger("mouseup");}if(A){A.stopPropagation();
}}).find("ul:first").sortable({delay:50,cursor:false,placeholder:"ui-state-hightlight",helper:"clone",scroll:false,revert:200,start:function(A,B){z._isSorting=true;},beforeStop:function(A,B){z._isSorting=false;},stop:function(A,B){h(B.item).removeAttr("style").find("a.hover:first").removeClass("hover");},update:function(A,C){if(A){var B=h.Event(A);B.type="update";B.target="applications";z._triggerListener(B);}}}).disableSelection().children("li").bind("click",function(B){var A=h(B.currentTarget),D=A.attr("id").split("_"),C;
if(B){B.preventDefault();if(D&&D[0]&&D[1]&&!A.find("a:first").hasClass("inactive")){C=h.Event(B);C.type=D[0].toLowerCase();C.target=D[1].toLowerCase();B.stopPropagation();z._triggerListener(C);}}}).find("a.button").hover(function(A){h(this).addClass("hover");},function(A){h(this).filter(".hover").removeClass("hover");});},addHighlight:function(z,A){this._$context.find("li#"+A+"_"+z+" a:first").addClass("current");},removeHighlight:function(){this._$context.find("li a.current").removeClass("current");
},isSorting:function(){return this._isSorting;},isActive:function(z,A){return !this._$context.find("li#"+A+"_"+z+" a:first").hasClass("inactive");},activateIcon:function(z,A){this._$context.find("li#"+A+"_"+z+" a.inactive:first").removeClass("inactive");},deactivateIcon:function(z,A){this._$context.find("li#"+A+"_"+z+" a:first").addClass("inactive");},showLoader:function(){this._$context.find("ul:first .ui-loader").show();},hideLoader:function(){this._$context.find("ul:first .ui-loader").hide();},setApplications:function(z){this._$context.find(".ui-pager-content:first").html(z);
this._appendEvents();},toArray:function(){return this._$context.find("ul:first").sortable("toArray");},initialize:function(){this._$context=h("#box_applications");this._isSorting=false;}},y.EventListener);var n=y.Class.declare({_onApplicationClicked:function(z){var B=y.config.applications.appList,A=this;if(z){if(B&&h.inArray(z,B)>-1){A._navigator.writeAppPixel(z,"click");A._navigator.activateApp(z);}}else{y.Log.warn("Missing argument appName in ApplicationController");}},_onLoginClicked:function(C){var z=y.config.applications.loginList,B=y.config.applications.loginMap,A=this;
if(B&&B.hasOwnProperty(C)){C=B[C];}if(C){if(z&&h.inArray(C,z)>-1){A._navigator.writeStatsPixel(C,"click");A._navigator.loginApp(C);}}else{y.Log.warn("Missing argument serviceName in ApplicationController");}},_onUpdateApplications:function(z){if(z){if(z==="applications"){this._updateSortable();}}else{y.Log.warn("Missing argument sourceName in ApplicationController");}},_updateSortationMap:function(A){var B,C=0,z={};for(B in A){++C;if(A[B]){currentOrder=userItems[A[B]];if(currentOrder){resultMap[currentOrder]=C;
}}}this._sortationMap=z;},_getSortationAsString:function(D){if(D){var H=this,F,G,A=0,E=false,C={},z={},B=H._navigator.getModel().getUserItems();for(F in D){++A;if(D[F]){G=B[D[F]];if(G&&A!=G.sortOrder){E=true;z[G.itemID]=A;}C[G.domName]=G.itemID;}}if(E&&!!C){H._navigator.getModel().setUserItems(C);}if(!!z){return y.JSON.stringify(z);}}else{y.Log.error("Missing argument sortList in ApplicationController");}return k;},_saveUserSortation:function(){var C=this,B=C._view,D=C._routing,z=B.toArray(),A={};
A[D.sessionParameter]=C._navigator.getModel().getSessionId();A[D.sortParameter]=C._getSortationAsString(z);if(D.saveSortationURL&&A&&A[D.sortParameter]){h.ajax({type:"GET",url:D.saveSortationURL,data:h.param(A),dataType:"text/plain",timeout:5000,success:function(E){},error:function(){y.Log.debug(arguments);}});}else{y.Log.error("Invalid config state in ApplicationController");}},_updateSortable:function(){var z=this;if(!!z._timeout||z._view.isSorting()){return;}z._timeout=p.setTimeout(function(){if(!z._view.isSorting()){z._navigator.writeStatsPixel("navigator","sortstop");
z._saveUserSortation();}z._timeout=null;},1000);},_loadUserApplications:function(E){var B=this,C=B._navigator.getModel(),A=B._view,D=B._routing,z={p:C.getParameter().crypt,m:C.getParameter().hmac};if(D.loadTemplateURL&&z&&z.p){h.ajax({type:"GET",url:D.loadTemplateURL,data:h.param(z),dataType:"jsonp",timeout:5000,beforeSend:function(){A.showLoader();},success:function(F){if(!!F.appTemplate){A.setApplications(F.appTemplate);}if(!!F.userItems){C.setUserItems(F.userItems);}if(!!F.userCredentials){C.setUserCredentials(F.userCredentials);
}if(h.isFunction(E)){E.apply(B);}},error:function(){y.Log.debug(arguments);},complete:function(){A.hideLoader();}});}else{y.Log.error("Invalid argument in ApplicationController");}},_handleLoginIcons:function(){var C=this,A=C._view,E=C._navigator.getModel(),z=y.config.applications.loginList,B=y.config.applications.loginMap,D,G,F;for(D in z){F=z[D];if(F&&!E.hasService(F)){for(G in B){if(F===B[G]){F=G;break;}}A.deactivateIcon(F,"login");}}},onNavigatorChanged:function(){var z=this,A=z._navigator.getBounds();
z._paging.renderPagingWidth(A.leftWidth,A.rightWidth);},onApplicationSwitched:function(){},triggerHandler:function(A){var z=this;if(A){switch(A.type){case"app":z._onApplicationClicked(A.target);break;case"login":z._onLoginClicked(A.target);break;case"update":z._onUpdateApplications(A.target);break;default:y.Log.warn("Unkown event type "+A.type+" in ApplicationController");}}},initialize:function(z){var A=this;A._navigator=z;A._timeout=null;A._routing=y.config.routing;A._view=new u();A._view.addListener(A);
A._paging=new s(A);A._loadUserApplications(function(){A._handleLoginIcons();A._paging.run();h(document).readyQueue(function(){A._navigator.onNavigatorChanged();});});}});y.ApplicationController=n;var e=y.Class.declare({addHighlight:function(z,A){this._$context.find("a#"+A+"_"+z).addClass("current");},removeHighlight:function(){this._$context.find("a.current").removeClass("current");},initialize:function(){var z=this;this._$context=h("#box_cockpit").children("div").bind("click",function(B){var A=h(B.currentTarget),D=A.attr("id").split("_"),C;
if(B){B.preventDefault();if(D&&D[0]&&D[1]){C=h.Event(B);C.type=D[0].toLowerCase();C.target=D[1].toLowerCase();B.stopPropagation();z._triggerListener(C);}}}).end().find("a.button").hover(function(A){h(this).addClass("hover");},function(A){h(this).filter(".hover").removeClass("hover");}).end();}},y.EventListener);var a=y.Class.declare({_onApplicationClicked:function(z){var A=this;if(z){A._navigator.activateApp(z);A._navigator.writeAppPixel(z,"click");}else{y.core.error("Invalid argument "+z+" in CockpitController");
}},triggerHandler:function(z){if(z&&z.type==="app"){this._onApplicationClicked(z.target);}},onApplicationSwitched:function(){},initialize:function(z){var A=this;A._navigator=z;A._view=new e();A._view.addListener(A);}});y.CockpitController=a;var j=y.Class.declare({_handle:function(A){var z=this;if(!A){return;}if(!z._window||z._window.closed){z._window=p.open(A,z._title,z._getParameterString());}else{if(A!==z._scriptUrl){z._window.location.href=A;z._resizeWindow();}}},run:function(){var z=this;if(z._isRunning||!z._defaultUrl){return;
}z._isRunning=true;z._url=null;z._handle('javascript:"";');z.focus();z._timeout=p.setTimeout(function(){z._overwriteLocation();z.stop();},100);},stop:function(){var z=this;if(z._timeout){p.clearTimeout(z._timeout);z._timeout=null;}z._isRunning=false;},open:function(A){var z=this;if(A!==k){z._url=A;}z._handle(z._url);z.focus();},close:function(){var z=this;if(z._window){try{z._window.close();z._window=null;}catch(A){}}},focus:function(){var z=this;if(z._window){try{z._window.focus();}catch(A){}}},setDefaultUrl:function(A){var z=this;
if(A!==k){z._defaultUrl=A;}},getDefaultUrl:function(){return this._defaultUrl;},setUrl:function(z){if(z!==k){this._url=z;}},getUrl:function(){return this._url;},setParams:function(z){this._params=z;},getParams:function(){return this._params;},_getParameterString:function(){var z=this._params,A;if(!z||!z.height||!z.width){A="height=800px,width=765px";}else{A="height="+z.height+"px,width="+z.width+"px";if(z.scrollbars){A+=",scrollbars="+z.scrollbars;}}return A;},_resizeWindow:function(){var z=this,B=z._params;
if(z._window&&!z._window.closed&&B&&B.height&&B.width){try{if(z._window.document.height!==B.height||z._window.document.width!==B.width){z._window.resizeTo(B.height,B.width);}}catch(A){}}},_overwriteLocation:function(){var z=this;if(z._window&&!z._window.closed){try{if(z._url){z._window.location.replace(z._url);}else{if(z._defaultUrl){z._window.location.replace(z._defaultUrl);}}}catch(A){}}},initialize:function(A,B){var z=this;z._window=null;z._defaultUrl=null;z._scriptUrl='javascript:"";';z._title="Hilfe";
z._isRunning=false;z._timeout=null;if(A){z._url=A;}else{z._url=null;}if(B){z._params=B;}else{z._params=null;}}});var t=y.Class.declare({getLength:function(){return this._$context.find("ul:first").children(":visible").length;},isSettingsVisible:function(){return this._$context.find("#link_settings").is(":visible");},showSettings:function(){this._$context.find("#link_settings:hidden").show();},hideSettings:function(){this._$context.find("#link_settings:visible").hide();},isHelpVisible:function(){return this._$context.find("#app_help").is(":visible");
},showHelp:function(){this._$context.find("#app_help:hidden").show();},hideHelp:function(){this._$context.find("#app_help:visibile").hide();},removeHighlight:function(){this._$context.find("a.current").removeClass("current");},addHighlight:function(z,A){this._$context.find("#"+A+"_"+z+" a:first").addClass("current");},initialize:function(){var z=this;this._$context=h("#box_tools").find("ul:first li").bind("click",function(B){var A=h(B.currentTarget),D=A.attr("id").split("_"),C;if(B&&D&&D[0]&&D[1]){if(D[1]!=="logout"){B.preventDefault();
}C=h.Event(B);C.type=D[0].toLowerCase();C.target=D[1].toLowerCase();B.stopPropagation();z._triggerListener(C);}}).end().find("a.button").hover(function(A){h(this).addClass("hover");},function(A){h(this).filter(".hover").removeClass("hover");}).end();}},y.EventListener);var x=y.Class.declare({setHelpUrl:function(A){var z=this._popup;if(z){z.setUrl(A);}},_toggleSettingsButton:function(){var A=this,B=A._settings,z=A._view;if(!B&&z.isSettingsVisible()){A._view.hideSettings();A._navigator.setAmountClass("tools",z.getLength());
}else{if(B&&B.type==="iac"&&!z.isSettingsVisible()){A._view.showSettings();A._navigator.setAmountClass("tools",z.getLength());}}},_getPopupController:function(){var z=this._popup;if(!z){this._popup=z=new j();}return z;},_handleHelpPopup:function(){var A=this,z=A._getPopupController(),B=A._help;z.setDefaultUrl(B.defaultUrl);z.setParams(B.windowParams);z.run();A._navigator.sendRemoteCall(A._appName,"getHelpUrl");},_activateTutorial:function(){this._navigator.activateApp("tutorial");},_onHelpClicked:function(){var z=this,A=z._help;
z._navigator.writeStatsPixel("help","click");if(A){switch(A.type){case"popup":z._handleHelpPopup();break;case"iac":z._navigator.sendRemoteCall(z._appName,"showHelp");break;default:z._activateTutorial();}}else{z._activateTutorial();}},_onSettingsClicked:function(){var z=this,A=z._settings;if(A&&A.type==="iac"){z._navigator.writeStatsPixel("settings","click");z._navigator.sendRemoteCall(z._appName,"showSettings");}},_onLogoutClicked:function(){this._navigator.onBeforeLogout();},_onCustomerClicked:function(){},_updateToolsConfig:function(){var z=this,A=z._navigator.getModel().getCurrent();
if(A){z._appName=A.id;z._help=A.help;z._settings=A.settings;}else{z._appName=null;z._help=null;z._settings=null;}},triggerHandler:function(A){var z=this;if(A&&(A.type==="app"||A.type==="link")){switch(A.target){case"help":z._onHelpClicked();break;case"settings":z._onSettingsClicked();break;case"customer":z._onCustomerClicked();break;case"logout":z._onLogoutClicked();break;default:y.Log.warn("Unkown event target "+A.target+" in ToolsController");}}},onApplicationSwitched:function(){var z=this;z._updateToolsConfig();
z._toggleSettingsButton();},initialize:function(z){var A=this;A._navigator=z;A._popup=null;A._appName=null;A._settings=null;A._help=null;A._view=new t();A._view.addListener(A);A._updateToolsConfig();A._toggleSettingsButton();}});y.ToolsController=x;})(jQuery,window,com.unitedinternet.portal.navigator);(function(e,d,a,g){function c(){}c.prototype.resolveDestination=function(i){var j,h;j=null;h=document.getElementById("iframe_"+i);if(h){j=h.contentWindow||h;}return j?{targetWindow:j,targetOrigin:"*"}:null;
};c.prototype.verifySource=function(j,h,i){return{status:"OK",message:"unverified"};};function b(){}b.prototype.resolveDestination=function(h){return{targetName:h,targetOrigin:"*"};};b.prototype.verifySource=function(i,h,j){return{status:"OK",message:"unverified"};};var f=a.Class.declare({_hasClient:function(h){return h&&this._appClients[h];},_getNameFromMap:function(h){var i=a.config.communication.destinationMap;if(h&&i&&i.hasOwnProperty(h)){return i[h];}return g;},_handleHubMessage:function(i){var h=this,j=this._comm.getApplication(i.source);
switch(i.data){case"HUB:__connect__":if(j){if(!j.properties||j.properties.runState!=="ready"){h._comm.setCommState(i.source,"ready");h._transport.sendMessage(i.source,"HUB:__connected__");if(j.queuedMessage){h._transport.sendMessage(j.queuedMessage.destination,j.queuedMessage.data);j.queuedMessage=null;}}}else{throw new Error("IACHub: unknown app "+i.source+" trying to connect to hub -- ignored.");}break;case"HUB:__disconnect__":if(j){h._transport.sendMessage(i.source,"HUB:__disconnected__");h._comm.setCommState(i.source,"disconnected");
}else{throw new Error("IACHub: unknown app "+i.source+" trying to disconnect from hub -- ignored.");}break;}},_handleHubStatusReady:function(){var h=this,k,i,j=h._comm.getApplications();for(i in j){k=j[i];if(k&&k.properties&&k.properties.runState==="running"&&k.properties.commState!=="ready"){h._transport.sendMessage(k.id,"HUB:__ready__");}}},_broadcastMessage:function(l){var j=this,n,k,h,m=j._comm.getApplications(),i=a.config.communication.broadcastList;if(i&&e.inArray(l.source,i)>-1){for(k in m){n=m[k];
if(n&&l.source!==n.id&&n.properties&&n.properties.commState==="ready"){h=new j.iac.Message(l.source,n.id,l.data,l.origin);j._relayMessage(h);}}}else{throw new Error("IACHub: Broadcast message not allowed for app "+l.source+" -- irgnored");}},_relayMessage:function(k,j,m,o){var i=this,h,l=k.data,n=i._comm.getApplication(k.destination);if(!n){h=i._getNameFromMap(k.destination);if(h){k.destination=h;n=i._comm.getApplication(h);}}if(!n){throw new Error("IACHub: cannot relay message for unknown app "+k.destination);
}if((j&&(!n.properties||n.properties.runState!=="running"))||(m&&n.properties&&n.properties.runState==="running")){i._comm.activateApp(k.destination);}if(n.properties&&n.properties.commState==="ready"){i._transport.sendMessage(k.destination,l);}else{if(o){n.queuedMessage=k;}}},_silentRemoteCall:function(h,j){var i=this,k=Array.prototype.slice.call(arguments,1),m=i._rpcWrapper.prepareRemoteCallData.apply(i._rpcWrapper,k),l=new i.iac.Message(i.name,h,m,null);i._relayMessage(l,false,false,true);},onStatusChanged:function(h){if(h==="ready"){this._handleHubStatusReady();
}},onError:function(){},onMessage:function(l){var i=this,n=l.data.substr(0,4),k=n==="RPC:",j=n==="RPE:",h=n==="HUB:",m=i._appClients[l.destination];a.Log.debug(l);if(h&&l.data){i._handleHubMessage(l);}else{if(m){if(k&&l.destination!==i.name){i._comm.activateApp(l.destination);}if(j&&l.destination==="broadcast"){i._broadcastMessage(l);}else{if(k||j){m.rpcWrapper.delegateRemoteCall(l);}}}else{if(k){i._relayMessage(l,true,true,true);}else{if(j&&l.destination==="broadcast"){i._broadcastMessage(l);}else{i._relayMessage(l);
}}}}},remoteCall:function(h,j){var i=this,k=Array.prototype.slice.call(arguments,1),m=i._rpcWrapper.prepareRemoteCallData.apply(i._rpcWrapper,k),l=new i.iac.Message(i.name,h,m,null);i.onMessage(l);},remoteExecute:function(h,j){var i=this,k=Array.prototype.slice.call(arguments,1),m=i._rpcWrapper.prepareRemoteExecuteData.apply(i._rpcWrapper,k),l=new i.iac.Message(i.name,h,m,null);i.onMessage(l);},registerApp:function(h,j){var i=this;i._appClients[h]={rpcClient:j,rpcWrapper:new i.iac.RPCWrapper(i._transport,j)};
},unregisterApp:function(h){var i=this;if(h&&i._appClients[h]){delete i._appClients[h];}},run:function(){var h=this;if(h.iac.PostMessageTransport.isAvailable()){h._protocolHandler=new c();h._transport=new h.iac.PostMessageTransport(h.name,h.context,h,h._protocolHandler);}else{if(h.iac.FlashTransport.isAvailable()){h._protocolHandler=new b();h._transport=new h.iac.FlashTransport(h.name,h.context,h,h._protocolHandler,h.flashParentId);}else{throw new Error("IACHub: no iac transport available!");}}h.registerApp(h.name,h.rpcClient);
h._transport.initialize();},initialize:function(i,k,l,j){var h=this;h.name=i;h.context=k;h.rpcClient=j;h._comm=l;h._transport=null;h._protocolHandler=null;h._rpcWrapper=new h.iac.RPCWrapper(h._transport,null);h._appClients={};}},{iac:com.unitedinternet.portal.iac});a.IACHub=f;})(jQuery,window,com.unitedinternet.portal.navigator);(function(e,d,a,f){var b,c=a.Class.declare({getServiceInfoByEmail:function(j){if(j){var i,h,g;if(j.indexOf("@")>-1){i=j.split("@");j=i[1];}h=b.getModel().getServiceByEmail(j.toLowerCase());
if(h){g=b.getModel().getUserCredentials();if(!h.iconURL){h.iconURL=g.baseImageUrl+h.image;}if(!h.titleText){h.titleText=h.hasCredentials?g.titleTagLogin.replace("%realname%",h.realname):g.titleTagCreate.replace("%realname%",h.realname);}return h;}}return null;},loginExtPartner:function(i,h){if(i){var g=b.getModel().getServiceByEmail(i);if(g){b.loginApp(g.id);if(h){b.writeStatsPixel(h,"click");}return false;}}return true;},activateByName:function(g){if(g){return !b.activateApp(g);}return true;},activateWithUrl:function(g,h){if(g&&h){return !b.activateApp(g,h);
}return true;},activateWithTracking:function(h,g){if(h&&g){return !b.activateApp(h,null,g);}else{if(h){return this.activateByName(h);}}return true;},activate:function(g){a.Log.warn("Usage of activate is deprecated!");return this.activateByName(g);},sendRegisterService:function(g){a.Log.warn("Usage of sendRegisterService is deprecated!");if(g){b.sendRegisterService(g);}},doStats:function(g,h){a.Log.warn("Usage of doStats is deprecated!");if(g&&h){b.writeStatsPixel(g,h);}},initialize:function(g,h){b=g;
this.iacBridge=h;}});a.MailInterface=c;})(jQuery,window,com.unitedinternet.portal.navigator);(function(d,g,f,b){var a=f.Class.declare({_parseAppData:function(l){var k,n,m=this._applicationData;for(k in l){n=l[k];if(n){if(n.current){delete n.current;this._currentName=n.id;}if(!n.properties){n.properties={};}if(!n.statistics){n.statistics={};}m[n.id]=n;}}},_parseStatsData:function(m){var k,l;for(k in m){l=m[k];if(l){this._statisticsData[k]=l;}}},_setProperty:function(k,l,m){if(k&&l&&m!==b&&this._applicationData.hasOwnProperty(k)){if(!this._applicationData[k].properties){this._applicationData[k].properties={};
}this._applicationData[k].properties[l]=m;}else{f.Log.warn("Invalid argument in NavigatorModel._setProperty");}},getApplication:function(k){if(k&&this._applicationData.hasOwnProperty(k)){return this._applicationData[k];}return b;},getApplications:function(){return this._applicationData;},setCommState:function(k,l){this._setProperty(k,"commState",l);},setRunState:function(k,l){this._setProperty(k,"runState",l);},setTimestamp:function(k,l){if(k&&l&&/[0-9]/.test(l)){var m=this._applicationData[k];if(!m.properties){m.properties={};
}m.properties.startTime=l;m.url=(m.url||"").replace(/\$\{starttime\}/g,l);}else{f.Log.warn("Invalid argument in NavigatorModel.setTimestamp");}},setTrackingCode:function(l,k){if(l&&(!k||/[a-zA-Z0-9]/.test(k))){var m=this._applicationData[l];m.url=(m.url||"").replace(/\$\{campaignID\}/g,k||"");}else{f.Log.warn("Invalid argument in NavigatorModel.setTrackingCode");}},setParameter:function(l,k){if(l&&k){this._parameter.crypt=l;this._parameter.hmac=k;}else{f.Log.warn("Invalid argument in NavigatorModel.setParameter");
}},getParameter:function(){return this._parameter;},setSessionId:function(k){if(k){this._sessionID=k;}else{f.Log.warn("Invalid argument in NavigatorModel.setSessionId");}},getSessionId:function(){return this._sessionID;},hasApplication:function(k){if(k){return !!this._applicationData&&this._applicationData.hasOwnProperty(k);}return b;},getCurrent:function(){if(this._currentName&&this._applicationData.hasOwnProperty(this._currentName)){return this._applicationData[this._currentName];}return b;},setCurrent:function(k){if(k&&k!==this._currentName){this._currentName=k;
}else{if(!k){f.Log.warn("Invalid argument in NavigatorModel.setCurrent");}}},isWidgetOf:function(k){if(k){var l=this._applicationData[this._currentName];return l&&l.widgets&&d.inArray(k,l.widgets)>-1;}return false;},isCurrent:function(k){return(k&&this._currentName===k);},getStatistics:function(k){if(k){return this._statisticsData[k];}else{f.Log.warn("Invalid argument in NavigatorModel.getStatistics");}return b;},hasStatistics:function(k){return(k&&!!this._statisticsData&&!!this._statisticsData[k]);
},hasService:function(m){if(m&&this._userCredentialData&&this._userCredentialData.hasOwnProperty("services")){var k,l=this._userCredentialData.services;for(k in l){if(l[k]&&l[k].realname.replace(" ","").toLowerCase()===m){return true;}}}return false;},setUserCredentials:function(k){if(typeof k==="string"){this._userCredentialData=f.JSON.parse(k);}else{this._userCredentialData=k;}},getUserCredentials:function(){return this._userCredentialData;},getServiceByID:function(m){if(m&&this._userCredentialData&&this._userCredentialData.hasOwnProperty("services")){var k,l=this._userCredentialData.services;
for(k in l){if(l[k]&&l[k].id==m){return l[k];}}}return b;},getServiceByName:function(m){if(m&&this._userCredentialData&&this._userCredentialData.hasOwnProperty("services")){var k,l=this._userCredentialData.services;for(k in l){if(l[k]&&l[k].realname.replace(" ","").toLowerCase()==m){return l[k];}}}return b;},getServiceByEmail:function(m){if(m&&this._userCredentialData&&this._userCredentialData.hasOwnProperty("services")){var k,l=this._userCredentialData.services;for(k in l){if(l[k]&&d.inArray(m,l[k].mailDomains)>-1){return l[k];
}}}return b;},pushHistory:function(k){if(k){this._historyStack.push(k);if(this._historyStack.length>=10){this._historyStack.shift();}}},popHistory:function(){if(this._historyStack.length){return this._historyStack.pop();}return b;},setUserItems:function(k){if(!this._userItemData){this._userItemData={};}var l,m=0;for(l in k){if(k[l]){this._userItemData[l]={domName:l,itemID:k[l],sortOrder:++m};}}},getUserItems:function(k){return this._userItemData;},getDefaultMailer:function(){return this._defaultMailer;
},setDefaultMailer:function(l){var k=f.config.applications.appList;if(l&&k&&d.inArray(l,k)>-1){this._defaultMailer=l;}},setBubbleOptions:function(k){this._bubbleOptions=k;},getBubbleOptions:function(){return this._bubbleOptions;},initialize:function(k,l){this._applicationData={};this._statisticsData={};this._userCredentialData=null;this._userItemData=null;this._currentName=null;this._historyStack=[];this._parameter={crypt:null,hmac:null};this._sessionID=null;this._defaultMailer="mail";this._bubbleOptions=null;
if(!!k){this._parseAppData(k);}if(!!l){this._parseStatsData(l);}}});var c=f.Class.declare({sayHello:function(k){alert("[Hub] Hello from "+k);},ping:function(k,l){this._comm.iacPing(k,l);},notify:function(k,l){this._comm.setNotification(k,l);},incrementNotify:function(k){this._comm.incrementNotification(k);},decrementNotify:function(k,l){this._comm.decrementNotification(k);},setTitle:function(k,l){this._comm.setTitle(k,l);},setStatus:function(k,l){this._comm.setStatus(k,l);},updateServiceData:function(l,k){this._comm.updateServiceData(parseInt(l,10),k==="true");
},activateApp:function(l,k){this._comm.activateApp(l,k);},restartApp:function(k){this._comm.restartApp(k);},removeApp:function(k){this._comm.removeApp(k);},hideWidget:function(k){this._comm.hideWidget(k);},newMail:function(l,k){this._comm.newMail(l,k);},showBubble:function(k,m,l,n,p,o){this._comm.showBubble({content:"TEXT",appName:k,type:m,token:l,time:n,title:p,text:o});},showHTMLBubble:function(k,m,l,n,p,o){this._comm.showBubble({content:"HTML",appName:k,type:m,token:l,time:n,title:p,text:o});},setCookie:function(l,n,k,p,m,o){this._comm.setCookie(l,n,k,p,m,o);
},setHelpUrl:function(l,k){this._comm.setHelpUrl(l,k);},initialize:function(k){this._comm=k;}});var i=f.Class.declare({_getAppByName:function(k){switch(typeof k){case"string":return this._navigator.getModel().getApplication(k);case"object":return k;default:return b;}},_isReady:function(k){var l=this._getAppByName(k);return(l&&l.properties&&l.properties.commState&&l.properties.commState==="ready");},registerApp:function(k,l){this._iacHub.registerApp(k,l);},sendEvent:function(k,m){if(k&&m){var l=this,o,n=l._getAppByName(k);
if(l._isReady(k)){o=n.events&&d.inArray(m,n.events)>-1;if(l._iacHub&&o){l._iacHub._silentRemoteCall(n.id,"navigatorEvent",m);}}}else{f.Log.warn("Invalid argument in NavigatorComm");}},remoteCall:function(){if(arguments.length>1){var k=this;if(k._iacHub){k._iacHub.remoteCall.apply(k._iacHub,arguments);}}else{f.Log.warn("Invalid argument in NavigatorComm");}},remoteExecute:function(){if(arguments.length>1){var k=this;if(self._iacHub&&k._isReady(arguments[0])){self._iacHub.remoteExecute.apply(k._iacHub,arguments);
}}else{f.Log.warn("Invalid argument in NavigatorComm");}},setTitle:function(k,m){var l=this;if(k&&l._navigator.getModel().hasApplication(k)){l._navigator.setTitle(m);}else{f.Log.warn("Invalid argument in NavigatorComm");}},setStatus:function(k,l){var m=this;if(k&&m._navigator.getModel().hasApplication(k)){m._navigator.setStatus(k,l);}else{f.Log.warn("Invalid argument in NavigatorComm");}},setHelpUrl:function(k,m){var l=this;if(k&&l._navigator.getModel().isCurrent(k)){l._navigator.setHelpUrl(m);}else{f.Log.warn("Invalid argument in NavigatorComm");
}},setCookie:function(m,o,k,q,n,p){var l;if(!m||!q||q==="/"){f.Log.warn("Invalid argument in NavigatorComm");}if(!k||k==="undefined"||k==="null"||k==="false"){k=null;}if(!n||n==="undefined"||n==="null"){l=g.location.hostname.match(/\.[^.]+\.[^.]+$/);n=l?l[0]:null;}if(!n){f.Log.warn("Invalid state in NavigatorComm");}p=(p==="true"||p==="1"||p==="yes");this._controller.setCookie(m,o,k,q,n,p);},setNotification:function(k,m){var l=this;if(k&&l._navigator.getModel().hasApplication(k)){l._navigator.notifyApp(k,m);
}},decrementNotification:function(k){var l=this,m;if(k&&l._navigator.getModel().hasApplication(k)){m=l._navigator.getNotifyValue(k);if(m&&/\d/.test(m)&&m>0){l._navigator.notifyApp(k,parseInt(m,10)-1);}}},incrementNotification:function(k){var l=this,m;if(k&&l._navigator.getModel().hasApplication(k)){m=l._navigator.getNotifyValue(k);if(m&&/\d/.test(m)&&m>0){l._navigator.notifyApp(k,parseInt(m,10)+1);}}},activateApp:function(l,k){var m=this;if(l&&m._navigator.getModel().hasApplication(l)){m._navigator.activateApp(l);
}},removeApp:function(k){var l=this;if(k&&l._navigator.getModel().hasApplication(k)){l._navigator.removeApp(k);}},restartApp:function(k){var l=this;if(k&&l._navigator.getModel().hasApplication(k)){l._navigator.restartApp(k);}},hideWidget:function(l){var k=this;if(l&&k._navigator.getModel().isWidgetOf(l)){k._navigator.hideWidget(l);}},showWidget:function(l){var k=this;if(l&&k._navigator.getModel().isWidgetOf(l)){k._navigator.showWidget(l);}},showBubble:function(k){if(k){this._navigator.showBubble(k);
}},sendRegisterService:function(k){if(k>0){this._iacHub.remoteCall("loginzentrale","callAppFunc","addService",k);}},updateServiceData:function(m,l){var k=this._navigator.getModel().getServiceByID(m);if(k){k.hasCredentials=l;}},newMail:function(n,m){var l=this,k=l._navigator.getModel().getDefaultMailer();l.remoteCall(k,"newMail",n,m);},getHubAsBridge:function(){return this._iacHub;},setNavigator:function(k){this._navigator=k;},getApplication:function(k){var l=this;if(l._navigator){return l._navigator.getModel().getApplication(k);
}return b;},getApplications:function(){var k=this;if(k._navigator){return k._navigator.getModel().getApplications();}return b;},setCommState:function(k,m){var l=this;if(l._navigator){return l._navigator.getModel().setCommState(k,m);}},run:function(){this._iacHub.run();},initialize:function(m){var k=this,l=new c(k);k._iacToken=m;k._iacHub=new f.IACHub("navigator",k._iacToken,k,l);}});var h=f.Class.declare({_getCanvasController:function(){if(!this._canvasController){this._canvasController=new f.CanvasController(this);
}return this._canvasController;},_getPortalController:function(){if(!this._portalController){this._portalController=new f.PortalController(this);}return this._portalController;},_getServicesController:function(){if(!this._servicesController){this._servicesController=new f.ServicesController(this);}return this._servicesController;},_getApplicationController:function(){if(!this._applicationController){this._applicationController=new f.ApplicationController(this);}return this._applicationController;
},_getCockpitController:function(){if(!this._cockpitController){this._cockpitController=new f.CockpitController(this);}return this._cockpitController;},_getSearchController:function(){if(!this._searchController){this._searchController=new f.SearchController(this);}return this._searchController;},_getToolsController:function(){if(!this._toolsController){this._toolsController=new f.ToolsController(this);}return this._toolsController;},_getStatisticsController:function(){if(!this._statisticsController){this._statisticsController=new f.StatisticsController(this);
}return this._statisticsController;},getBounds:function(){return this._controller.getBounds();},onApplicationSwitched:function(){this._getServicesController().onApplicationSwitched();this._getApplicationController().onApplicationSwitched();this._getCockpitController().onApplicationSwitched();this._getToolsController().onApplicationSwitched();},onBeforeLogout:function(){},onDocumentReady:function(){this._getSearchController().onNavigatorChanged();},onWindowResize:function(){this._getApplicationController().onNavigatorChanged();
},onNavigatorChanged:function(){this._getApplicationController().onNavigatorChanged();},setAmountClass:function(k,l){this._controller.setClass(k,l);},sendRemoteCall:function(){this._comm.remoteCall.apply(this._comm,arguments);},sendRegisterService:function(){this._comm.sendRegisterService.apply(this._comm,arguments);},getModel:function(){return this._model;},getComm:function(){return this._comm;},setTitle:function(k){this._controller.setTitle(k);},setStatus:function(k,l){this._controller.setStatus(k,l);
},showBubble:function(k){this._controller.bubble(k);},showWidget:function(k){},hideWidget:function(k){this._controller.hideWidget(k);},getNotifyValue:function(k){return this._controller.getNotify(k);},notifyApp:function(k,l){this._controller.notify(k,l);},activateApp:function(l,m,k){return this._controller.activate(l,m,k);},removeApp:function(k){return this._controller.remove(k);},loginApp:function(k){this._controller.login(k);},restartApp:function(k){this._controller.restart(k);},setHelpUrl:function(k){this._getToolsController().setHelpUrl(k);
},appendApp:function(k,l){this._getCanvasController().append(k,l);},navigateApp:function(k,l){this._getCanvasController().navigate(k,l);},showApp:function(k,l){this._getCanvasController().show(k,l);},hideApp:function(k){this._getCanvasController().hide(k);},detachApp:function(k){this._getCanvasController().detach(k);},writeAppPixel:function(k,l,m){return this._getStatisticsController().writeAppPixel(k,l,m);},writeTrackingPixel:function(l,m,k){return this._getStatisticsController().writeTrackingPixel(l,m,k);
},writeStatsPixel:function(l,k){return this._getStatisticsController().writeStatsPixel(l,k);},initialize:function(k,l,m){this._controller=k;this._model=l;this._comm=m;this._canvasController=new f.CanvasController(this);this._portalController=new f.PortalController(this);this._searchController=new f.SearchController(this);this._servicesController=new f.ServicesController(this);this._applicationController=new f.ApplicationController(this);this._cockpitController=new f.CockpitController(this);this._toolsController=new f.ToolsController(this);
}});var j=f.Class.declare({_getClass:function(k){var l=this._$context.attr("class");if(k&&l){return l.match(new RegExp(k+"\\d{1,2}"));}return null;},_removeClass:function(k){var l=this._getClass(k);if(l){this._$context.removeClass(d.isArray(l)?l[0]:l);}},_getWidthOfElements:function(k){var l=0;this._$context.find(k).each(function(m,n){l+=d(n).outerWidth();});return l;},_getOffset:function(k){if(k){var l=this._$context.find("#app_"+k);return l.offset().left+l.width();}return b;},setServices:function(k){this._removeClass("n-services_");
if(k){this._$context.addClass("n-services_"+k);}},setApplications:function(k){this._removeClass("n-apps_");if(k){this._$context.addClass("n-apps_"+k);}},setTools:function(k){this._removeClass("n-tools_");if(k){this._$context.addClass("n-tools_"+k);}},getWidth:function(k){switch(k){case"left":return this._getWidthOfElements(".box.left");case"right":return this._getWidthOfElements(".box.right");default:return this._$context.width();}},setStatus:function(n,m){var l,o="status_"+m,k=this._$context.find("#app_"+n+" .button:first");
if(k.length&&m){l=k.attr("class").match(new RegExp("status_\\w*"));if(l!=o){k.addClass(o);if(l){k.removeClass(l);}}}},resetStatus:function(m){var l,k=this._$context.find("#app_"+m+" .button:first");if(k.length){l=k.attr("class").match(new RegExp("status_\\w*"));if(l){k.removeClass(l);}}},setMode:function(k){this._removeClass("n-mode_");if(k){this._$context.addClass("n-mode_"+k);}},resetMode:function(){this._removeClass("n-mode_");},setTitle:function(k){if(k){d(document).attr("title",k);}},resetTitle:function(){d(document).attr("title",this._defaultTitle);
},getNotification:function(l){var k=this._$context.find("#n_"+l);if(k.length){return k.data("notify");}else{f.Log.error("Element n_"+l+" not found in NavigatorView.showNotification");}},showNotification:function(l,n,m){var k=this._$context.find("#n_"+l);if(k.length){if(k.children().length){k.children(":first").text(n);}else{d("<span />").addClass("notify notify-text").text(n).appendTo(k.addClass("notify notify-wrapper"));}k.filter(":hidden").css("display","block").end().data("notify",m||n);}else{f.Log.error("Element n_"+l+" not found in NavigatorView.showNotification");
}},hideNotification:function(l){var k=this._$context.find("#n_"+l);if(k.length){k.filter(":visible").removeClass("notify notify-wrapper").removeAttr("style").empty();}else{f.Log.error("Element n_"+l+" not found in NavigatorView.hideNotification");}},showBubble:function(k,l){var m=this._getOffset(l.appName)-3;if(!d.support.opacity){this._$bubble.addClass("gif");}else{this._$bubble.addClass("png");}if(l.title){this._$bubble.find("#bubble_title").text(l.title);}if(l.content==="HTML"){this._$bubble.find("#bubble_text").html(l.text);
}else{this._$bubble.find("#bubble_text").text(l.text);}if(k>0){this._$bubble.css("left",m+"px").fadeIn(k);}else{this._$bubble.css("left",m+"px").show();}},hideBubble:function(k,n){var l=this,m=d.Event();m.type="bubble";m.target=n;if(k>0){this._$bubble.fadeOut(k,function(){l._$bubble.removeAttr("style").find("#bubble_title,#bubble_text").removeAttr("class").empty();l._triggerListener(m);});}else{this._$bubble.removeAttr("style").find("#bubble_title,#bubble_text").removeAttr("class").empty();this._triggerListener(m);
}},isBubbleHover:function(){return this._$bubble.hasClass("hover");},isBubbleVisible:function(){return this._$bubble.is(":visible");},addHighlight:function(k){this._$context.find("#app_"+k+" .button:first").addClass("current");},removeHighlight:function(k){this._$context.find("#app_"+k+" .button.current:first").removeClass("current");},initialize:function(){var l=this,k=f.config.bubble.fadeTime;this._defaultTitle=document.title||"";this._$context=d("#navigator");this._$bubble=d("#bubble").hover(function(){l._$bubble.addClass("hover");
},function(){l._$bubble.removeClass("hover");}).find("span").filter("#bubble_close").bind("click",function(m){if(m){m.preventDefault();}l._$bubble.removeClass("hover");l.hideBubble(k,"close");}).end().filter("#bubble_title, #bubble_text").bind("click",function(m){if(m){m.preventDefault();}l._$bubble.removeClass("hover");l.hideBubble(k,"click");}).end().end();}},f.EventListener);var e=f.Class.declare({_autoActivateApplication:function(k){if(k){var l=this,m=l._model,n=m.getApplication(k);if(n.autoStart&&n.autoStart.url){if(!n.properties||n.properties.runState!=="running"){l._coordinator.appendApp(n.id,n.autoStart.url);
m.setRunState(n.id,"running");}else{if(n.properties.runState==="prepared"){l._coordinator.navigateApp(n.id,n.autoStart.url);m.setRunState(n.id,"running");}}}}else{f.Log.warn("Invalid argument in NavigatorController");}},_autoStart:function(){var k=this,o,l,n,m=k._model.getApplications();n=function(p){return function(){k._autoActivateApplication.apply(k,[p]);};};for(l in m){o=m[l];if(o&&o.autoStart&&(!o.properties||!o.properties.runState)){g.setTimeout(n(o.id),o.autoStart.delay||5000);}}},_bindEvents:function(){var k=this;
d(document).readyQueue(function(l){if(k._coordinator){k._coordinator.onDocumentReady.apply(k._coordinator);}});d(g).bind("resize",function(l){if(k._coordinator){k._coordinator.onWindowResize.apply(k._coordinator);}});},_getNameFromMap:function(k){var l=f.config.applications.appMap;if(l&&l.hasOwnProperty(k)){return l[k];}return k;},setClass:function(k,m){var l=this;switch(k){case"tools":l._view.setTools(m);break;case"applications":l._view.setApplications(m);break;case"services":l._view.setServices(m);
break;}},setStatus:function(k,l){this._view.setStatus(k,l);},setTitle:function(l){var k=this;if(l){k._view.setTitle(l);}else{k._view.resetTitle();}},addHighlight:function(k){this._view.addHighlight(k);},getBounds:function(){var k=this._view;return{leftWidth:k.getWidth("left"),rightWidth:k.getWidth("right"),width:k.getWidth()};},writeStatsPixel:function(k){this._coordinator.writeStatsPixel("navigator",k);},setCookie:function(m,o,l,q,n,p){var k=f.config.security.cookieDomain;if(m&&o&&(!n||n.indexOf(k)>-1)){document.cookie=m+"="+encodeURIComponent(o)+(l?"; expires="+l:"")+(q?"; path="+q:"")+(n?"; domain="+n:"")+(p?"; secure":"");
}else{f.Log.error("Invalid argument NavigatorController");}},registerRPCClient:function(k,m){var l=this;if(!k||!m){f.Log.error("Invalid argument in NavigatorController");}else{if(l._model.hasApplication(k)){l._comm.registerApp(k,m);l._model.setCommState(k,"ready");}}},getNotify:function(k){if(k){var l=this._view.getNotification(k);if(l){return l;}}return b;},notify:function(k,m){var l=this,n;if(k){if(m){n=m;if(/\d/.test(m)&&parseInt(m,10)>99){m="99!";}l._view.showNotification(k,m,n);}else{l._view.hideNotification(k);
}}},bubble:function(p){var m=this,o,n=m._model,l=m._view,k=f.config.bubble.fadeTime||400;if(!p.appName||!n.hasApplication(p.appName)){return;}n.setBubbleOptions(p);l.showBubble(k,p);if(m._timeoutHandle){g.clearTimeout(m._timeoutHandle);m._timeoutHandle=null;}o=1000*Math.max(Math.min(+p.time||2,10),2);m._timeoutHandle=g.setTimeout(function(){if(l.isBubbleVisible()&&!l.isBubbleHover()){l.hideBubble(k,"timeout");}m._timeoutHandle=null;},o);},activate:function(l,o,k){var m=this,n=m._model.getApplication(l);
if(!l||!n){f.Log.warn("Invalid argument in NavigatorController");return false;}else{if(m._model.isWidgetOf(l)){return m._activateWidget(n);}else{return m._activateApplication(n,o,k);}}},remove:function(k){var l=this,m=l._model.getApplication(k);if(!k||!m){f.Log.warn("Invalid argument in NavigatorController");return false;}else{if(!l._model.isWidgetOf(k)){return l._removeApplication(m);}}},hideWidget:function(l){var k=this,m=k._model.getApplication(l);if(m&&m.properties&&m.properties.runState){k._coordinator.hideApp(m);
}},_hideWidgets:function(m){if(!m){f.Log.warn("Invalid argument in NavigatorController");}else{if(m.widgets){var k,l;for(k in m.widgets){l=m.widgets[k];if(l){this.hideWidget(l);}}}}},_activateWidget:function(m){var k=this,l=k._model;if(!m){f.Log.warn("Invalid argument in NavigatorController");return false;}else{if(!m.properties||!m.properties.runState){l.setTimestamp(m.id,new Date().getTime());k._coordinator.appendApp(m);l.setRunState(m.id,"running");}}k._coordinator.showApp(m,true);return true;},_activateApplication:function(r,q,k){var m=this,p,l=m._view,n=m._model,o=n.getCurrent();
if(!r){f.Log.warn("Invalid argument in NavigatorController");}else{if(r!==o){if(o){m._comm.sendEvent(o,"hide");n.pushHistory(o.id);m._hideWidgets(o);}if(!r.properties||!r.properties.runState){n.setTimestamp(r.id,new Date().getTime());if(k){n.setTrackingCode(r.id,k);}m._coordinator.appendApp(r);n.setRunState(r.id,"running");p="show";}else{if(r.properties.runState==="prepared"){m._coordinator.navigateApp(r,q||r.url);n.setRunState(r.id,"running");p="show";}else{m._comm.sendEvent(r,"show");p="switch";
if(q){m._coordinator.navigateApp(r,q);}}}if(k){m._coordinator.writeTrackingPixel(r.id,p||"unkown",k);}else{m._coordinator.writeAppPixel(r.id,p||"unkown");}if(o){l.removeHighlight(m._getNameFromMap(o.id));}m._coordinator.showApp(r);n.setCurrent(r.id);m._coordinator.onApplicationSwitched();l.addHighlight(m._getNameFromMap(r.id));return true;}else{if(q){m._coordinator.navigateApp(r,q);}}}return false;},_removeApplication:function(q){var l=this,m=l._model,p=m.getCurrent(),k=l._view,o=m.popHistory(),n=m.getApplication(o);
if(!q){f.Log.warn("Invalid argument in NavigatorController");}else{if(q.properties&&q.properties.runState==="running"){l._comm.sendEvent(q,"close");if(q===p&&n){l._coordinator.showApp(n);m.setCurrent(n.id);k.removeHighlight(l._getNameFromMap(p.id));k.addHighlight(l._getNameFromMap(n.id));l._coordinator.onApplicationSwitched();}l._coordinator.detachApp(q);m.setRunState(q.id,null);m.setCommState(q.id,null);}}},login:function(n){var l=this,k,m,o=l._model.getApplication("loginzentrale");if(typeof n=="string"){k=l._model.getServiceByName(n);
}else{k=l._model.getServiceByID(n);}if(k&&o){if(k.hasCredentials&&o.loginUrl){if(k.gotoParam){m=o.loginUrl+"%26goto%3D"+k.gotoParam;}else{m=o.loginUrl;}g.open(m);}else{l._comm.sendRegisterService(k.id);}return false;}return true;},restart:function(k){var l=this,m=l._model,n=m.getApplication(k);if(!n){f.Log.warn("Invalid argument in NavigatorController");}else{if(n.properties&&n.properties.runState==="running"){l._coordinator.navigateApp(n.id,n.url);}}},_onBubbleClosed:function(n){var k=this,m=k._model,l=m.getBubbleOptions();
if(k._timeoutHandle&&n!=="timeout"){g.clearTimeout(k._timeoutHandle);k._timeoutHandle=null;}if(l){if(n==="click"){k._comm.remoteCall(l.appName,"bubbleResponse",l.token,"CLICK");}else{k._comm.remoteExecute(l.appName,"bubbleResponse",l.token,n?n.toUpperCase():"UNKOWN");}delete l;}},getModel:function(){return this._model;},getComm:function(){return this._comm;},getInterface:function(){var k=this;if(!k._coordinator){f.Log.warn("Invalid state in NavigatorController");}else{if(!k._interface){k._interface=new f.MailInterface(k._coordinator,k._comm.getHubAsBridge());
}}return k._interface;},run:function(){var k=this;k._coordinator=new h(k,k._model,k._comm);k._comm.setNavigator(k._coordinator);k._comm.run();k._bindEvents();k._autoStart();},triggerHandler:function(k){if(k&&k.type==="bubble"){this._onBubbleClosed(k.target);}},initialize:function(m,n,l){var k=this;k._view=new j();k._view.addListener(k);k._model=new a(m,n);k._comm=new i(l);k._timeoutHandle=null;}});f.NavigatorController=e;if(!f.bootstrap){f.bootstrap=function(m){if(m.appData&&m.statsData&&m.iacToken){var k=new e(m.appData,m.statsData,m.iacToken),l=k.getModel();
if(m.rpcName&&m.rpcClient){k.registerRPCClient(m.rpcName,m.rpcClient);}l.setParameter(m.cryptParam,m.hmacParam);l.setSessionId(m.sessionId);if(m.mailClient){l.setDefaultMailer(m.mailClient);}k.run();k.writeStatsPixel("startup");f.Log.debug("Navigator initialized.");return k.getInterface();}else{throw new Error("Invalid argument(s) in Navigator bootstrap");}};}})(jQuery,window,com.unitedinternet.portal.navigator);